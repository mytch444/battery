#!/bin/bash

if [ "$1" == "-h" ]; then
	echo
    echo "$0"
	echo
	echo "Prints status of batteries"
	echo
    echo "   Will print out the percentage and status."
    echo "$0 -c"
    echo "   Will just print out the percentage with no fansy stuff. Thus it is clean."
    echo "$0 -s"
    echo "   Will just print out the state."
    echo "$0 -h"
    echo "   Will give you this."
    exit 0
fi

for b in `find /sys/devices/ -name "BAT*"`; do
	cd "$b"
	PERCENT=$((100 * `cat energy_now` / `cat energy_full`))
	STATUS=`cat status`

	if [ "$1" == "-c" ]; then
		echo "$PERCENT"
	elif [ "$1" == "-s" ];then
		echo "$STATUS"
	else
		echo "$PERCENT% [$STATUS]"
	fi
done
